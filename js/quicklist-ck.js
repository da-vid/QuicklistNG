window.addEventListener("load",function(){FastClick.attach(document.body)},!1);angular.module("quicklist",["firebase","linkify","ui.sortable","mgcrea.ngStrap"]).factory("listName",["$firebase",function(e){var t=new Firebase("https://qwiklist.firebaseio.com/listAttrs/"+getListID()+"/listName");return e(t)}]).factory("listAttrs",["$firebase",function(e){var t=new Firebase("https://qwiklist.firebaseio.com/listAttrs/"+getListID());return e(t)}]).controller("listController",["$scope","$firebase","$modal","listName","listAttrs",function(e,t,n,r,i){function l(){if(e.offline){Firebase.goOnline();console.log("Went Online.");e.offline=!1}c()}function c(){clearTimeout(u);u=setTimeout(h,o)}function h(){Firebase.goOffline();e.offline=!0;console.log("Went offline.")}function p(){e.listAttrs.$update({lastMod:Math.floor((new Date).getTime()/1e3)})}getListID();e.listName=r;e.listAttrs=i;var s=new Firebase("https://qwiklist.firebaseio.com/lists/"+getListID());e.items=t(s);e.loaded=!1;e.title="blah";e.content="contentblah";var o=108e5,u=setTimeout(h,o);e.offline=!1;document.addEventListener("keydown",l);document.addEventListener("mousedown",l);document.addEventListener("mousemove",l);document.addEventListener("touchstart",l);var a=n({scope:e,template:"shareModal.html",animation:"am-fade-and-slide-top",show:!1}),f=n({scope:e,template:"newListModal.html",animation:"am-fade-and-slide-top",show:!1});e.moreThanWhitespace=/\S/;e.defaultPageTitle="qList.cc | quick lists";e.defaultListName="my list";e.pageURL=document.location.href;e.pageDisplayURL=document.location.hostname+document.location.pathname;e.sortableOptions={start:function(e,t){l()},handle:".gripper",disabled:!1};e.addItem=function(){l();e.addItemForm.addItemBox.$valid&&s.child(e.nextItemID()).setWithPriority({ID:e.nextItemID(),name:e.itemName,checked:!1},e.nextPriority());e.itemName="";p()};e.deleteItem=function(t){l();var n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].ID===t&&e.items.$remove(n)});p()};e.checkItem=function(t){l();t.checked=!t.checked;e.items.$save();p()};e.items.$on("loaded",function(){e.loaded=!0});e.getListName=function(){return e.listName.$value?e.listName.$value:e.defaultPageTitle};e.setListName=function(){l();e.listName.$set(e.listName.$value);p()};e.nextItemID=function(){var t=0,n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].ID>t&&(t=e.items[n].ID)});return t+1};e.nextPriority=function(){var t=0,n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].$priority>t&&(t=e.items[n].$priority)});return t+1};e.fbCount=function(e){var t=0,n=e.$getIndex();n.forEach(function(e,n){t++});return t};e.showShareModal=function(){a.$promise.then(function(){a.show()})};e.showNewListModal=function(){e.showModal(f)};e.showModal=function(e){e.$promise.then(function(){e.show()})}}]).directive("selectOnClick",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){this.select()})}}}).directive("selectPageBox",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){document.getElementById("pageBox").select()})}}});