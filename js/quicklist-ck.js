window.addEventListener("load",function(){FastClick.attach(document.body)},!1);angular.module("quicklist",["firebase","linkify","ui.sortable","mgcrea.ngStrap"]).factory("listName",["$firebase",function(e){var t=new Firebase("https://qwiklist.firebaseio.com/listAttrs/"+getListID()+"/listName");return e(t)}]).factory("listAttrs",["$firebase",function(e){var t=new Firebase("https://qwiklist.firebaseio.com/listAttrs/"+getListID());return e(t)}]).controller("listController",["$scope","$firebase","$modal","listName","listAttrs",function(e,t,n,r,i){function h(){if(e.offline){Firebase.goOnline();console.log("Went Online.");e.offline=!1}p()}function p(){clearTimeout(u);u=setTimeout(d,o)}function d(){Firebase.goOffline();e.offline=!0;console.log("Went offline.")}function v(){e.listAttrs.$update({lastMod:Math.floor((new Date).getTime()/1e3)})}getListID();e.listName=r;e.listAttrs=i;var s=new Firebase("https://qwiklist.firebaseio.com/lists/"+getListID());e.items=t(s);e.loaded=!1;e.title="blah";e.content="contentblah";var o=108e5,u=setTimeout(d,o);e.offline=!1;document.addEventListener("keydown",h);document.addEventListener("mousedown",h);document.addEventListener("mousemove",h);document.addEventListener("touchstart",h);var a=n({scope:e,template:"shareModal.html",animation:"am-fade-and-slide-top",show:!1}),f=n({scope:e,template:"newListModal.html",animation:"am-fade-and-slide-top",show:!1});e.moreThanWhitespace=/\S/;e.defaultPageTitle="qList.cc | quick lists";e.listNameFocused=!1;var l="my qList",c="name your list here";e.listNamePlaceholder=l;e.pageURL=document.location.href;e.pageDisplayURL=document.location.hostname+document.location.pathname;e.sortableOptions={start:function(e,t){h()},handle:".gripper",disabled:!1};e.addItem=function(){h();e.addItemForm.addItemBox.$valid&&s.child(e.nextItemID()).setWithPriority({ID:e.nextItemID(),name:e.itemName,checked:!1},e.nextPriority());e.itemName="";v()};e.deleteItem=function(t){h();var n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].ID===t&&e.items.$remove(n)});v()};e.checkItem=function(t){h();t.checked=!t.checked;e.items.$save();v()};e.items.$on("loaded",function(){e.loaded=!0});e.getListName=function(){return e.listName.$value?e.listName.$value:e.defaultPageTitle};e.titleBoxFocus=function(){e.listNamePlaceholder=c;e.listNameFocused=!0};e.titleBoxBlur=function(){e.listNamePlaceholder=l;e.listNameFocused=!1;setListName()};e.setListName=function(){h();e.listName.$set(e.listName.$value);v()};e.nextItemID=function(){var t=0,n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].ID>t&&(t=e.items[n].ID)});return t+1};e.nextPriority=function(){var t=0,n=e.items.$getIndex();n.forEach(function(n,r){e.items[n].$priority>t&&(t=e.items[n].$priority)});return t+1};e.fbCount=function(e){var t=0,n=e.$getIndex();n.forEach(function(e,n){t++});return t};e.showShareModal=function(){a.$promise.then(function(){a.show()})};e.showNewListModal=function(){e.showModal(f)};e.showModal=function(e){e.$promise.then(function(){e.show()})}}]).directive("selectOnClick",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){this.select()})}}}).directive("selectPageBox",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){document.getElementById("pageBox").select()})}}});